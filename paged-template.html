<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"$if(lang)$ lang="$lang$" xml:lang="$lang$"$endif$>

<head>

$metadata.html()$

<meta property="og:title" content="$pagetitle$" />
$if(url)$<meta property="og:url" content="$url$" />$endif$
$if(cover-image)$<meta property="og:image" content="$url$$cover-image$" />$endif$
$if(description)$<meta property="og:description" content="$description$" />$endif$
<meta name="description" content="$if(description)$$description$$else$$pagetitle$$endif$">

$-- Used to pass Pandoc meta into paged.js JS hooks
<script id="pandoc-meta" type="application/json">
$-- Need to fix issue with how meta are inserted - escaping problem
$meta-json$
</script>

<style>
    $styles.html()$
</style>

$for(header-includes)$
$header-includes$
$endfor$

$if(math)$
  $math$
$endif$

$for(css)$
<link rel="stylesheet" href="$css$" />
$endfor$

</head>

<body>

<div class="running-h1-title"></div>

<div class="running-h2-title"></div>

$for(include-before)$
$include-before$
$endfor$

<div class="front-page">
$-- Insert <header> element
$title-block.html()$
</div>

<div class="front-matter-container">
$if(toc)$
    <nav id="$idprefix$TOC" role="doc-toc" class="level1 toc front-matter">
        $if(toc-title)$
        <h2 id="$idprefix$toc-title">$toc-title$</h2>
        $endif$ 
        $table-of-contents$
    </nav>
$endif$
</div>

<div class="main">
$body$
</div>

$for(include-after)$
$include-after$
$endfor$

</body>
</html>
